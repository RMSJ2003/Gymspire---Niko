extends base

block styles
  link(rel="stylesheet" href="/css/workoutPlan.css")

block content
  // ðŸ”¹ TOP BAR
  .top-bar
    if user.userType === "user"
      a.dashboard-btn(href='/dashboard') Dashboard
    if user.userType === "coach"
      a.dashboard-btn(href='/coachDashboard') Dashboard
    if user.userType === "admin"
      a.dashboard-btn(href='/adminDashboard') Dashboard
    a.back-btn(href='javascript:history.back()') Back

  - const safeUser = user || { username: "Guest", pfpUrl: null }
  - const planExists = typeof hasPlan !== "undefined" ? hasPlan : false
  - const exerciseList = exercises || []

  // ðŸ”¹ PAGE TITLE
  h1 #{title || "Workout Plan"}

  // ðŸ”¹ USER PROFILE
  h2 #{safeUser.username}

  if safeUser.pfpUrl
    img.profile-pic(src=safeUser.pfpUrl alt="Profile Picture" width="150")
  else
    img.profile-pic(src="/img/default-user.png" alt="Default Profile" width="150")

  // ðŸ”¹ WORKOUT PLAN ACTIONS
  if planExists
    a(href='/editWorkoutPlan' class="btn") Edit Workout Plan
  else
    p(style="color:red; font-weight:bold") You do not have a workout plan yet. Please create one first.
    a(href='/createWorkoutPlan' class="btn") âž• Create Workout Plan

  // ðŸ”¹ EXERCISES
  if exerciseList.length === 0
    p No exercises in your workout plan yet.
  else
    each exercise in exerciseList
      .exercise-card
        h3= exercise.name || "Unnamed Exercise"
        p Target: #{exercise.target || "N/A"}

        if exercise.gifURL
          img(src=exercise.gifURL, alt=exercise.name, width="200")

        if exercise.instructions && exercise.instructions.length
          h4 Instructions:
          ul
            each step in exercise.instructions
              li= step
